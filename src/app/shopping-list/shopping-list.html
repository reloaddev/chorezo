<!-- todo.component.html -->
<div class="max-w-2xl mx-auto">
  <!-- Clear All Button -->
  <div class="flex justify-end mb-4" *ngIf="todos.length > 0">
    <button 
      (click)="clearAll()" 
      class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm font-medium"
    >
      Clear All
    </button>
  </div>

  <!-- Todo List -->
  <div class="bg-white rounded-xl shadow-lg overflow-hidden">
    <!-- Existing Todos -->
    <div 
      *ngFor="let todo of todos" 
      class="flex items-center px-4 border-b border-gray-100 last:border-b-0 hover:bg-gray-50 transition-colors"
      [class.bg-gray-50]="todo.completed"
    >
      <button 
        (click)="toggleTodo(todo.id)" 
        class="w-6 h-6 rounded-full flex items-center justify-center mr-3 text-lg transition-all hover:bg-gray-200 flex-shrink-0"
        [class.text-green-500]="todo.completed"
        [class.text-gray-400]="!todo.completed"
        [class.bg-green-100]="todo.completed"
      >
        <span *ngIf="todo.completed">✓</span>
        <span *ngIf="!todo.completed">○</span>
      </button>
      
      <!-- Display Mode -->
      <span 
        *ngIf="editingId !== todo.id"
        (click)="startEditing(todo)"
        (keydown.enter)="startEditing(todo)"
        tabindex="0"
        class="flex-1 text-gray-700 cursor-pointer hover:bg-gray-100 px-2 py-4 rounded transition-colors"
        [class.line-through]="todo.completed"
        [class.text-gray-400]="todo.completed"
        role="button"
        aria-label="Edit todo"
      >
        {{ todo.text }}
      </span>

      <!-- Edit Mode -->
      <input 
        *ngIf="editingId === todo.id"
        [(ngModel)]="editingText"
        (keydown)="onEditKeyPress($event)"
        (blur)="saveEdit()"
        class="flex-1 py-4 bg-transparent border-none outline-none text-gray-700 px-2"
        #editInput
      >
      
      <button 
        (click)="deleteTodo(todo.id)" 
        class="w-6 h-6 rounded-full flex items-center justify-center ml-2 text-red-500 hover:bg-red-100 transition-all text-lg flex-shrink-0"
      >
        ×
      </button>
    </div>

    <!-- Add New Todo Item (Always visible) -->
    <div class="flex items-center bg-slate-50 px-2">
      <input 
        [(ngModel)]="newTodoText"
        (keydown)="onAddKeyPress($event)"
        placeholder="Add new task..."
        class="flex-1 p-4  border-none outline-none text-gray-700 placeholder-gray-400"
        #addInput
      >
      <button 
        (click)="addTodo()"
        [disabled]="!newTodoText.trim()"
        class="w-6 h-6 ml-2 rounded-full mr-2 flex items-center justify-center text-green-500 hover:bg-green-100 transition-all text-lg flex-shrink-0"
        aria-label="Add todo"
        *ngIf="newTodoText.trim().length > 0"
      >
        ✓
      </button>
    </div>
  </div>
</div>